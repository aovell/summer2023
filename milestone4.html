<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://github.com/janl/mustache.js.git">
  </head>
  <style>
    #search-results {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 20px;
}

.book {
  border: 1px solid #ccc;
  padding: 10px;
}

.book img {
  width: 100%;
  max-height: 200px;
}

.book h3 {
  margin-top: 10px;
}

.book p {
  margin-top: 5px;
  font-size: 14px;
}

    #view-toggle {
  margin-top: 10px;
}

#view-toggle button {
  margin-right: 10px;
}

.grid-view .book {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 20px;
}

.list-view .book {
  display: flex;
  align-items: center;
  border: 1px solid #ccc;
  padding: 10px;
  margin-bottom: 10px;
}

.list-view .book img {
  width: 80px;
  margin-right: 10px;
}

.list-view .book h3 {
  margin: 0;
}

.list-view .book p {
  margin: 5px 0 0 0;
}

  </style>
<body>
  <nav>
    <ul>
      <li><a href = "index.html"> Main menu</a></li>
      <li><a href="home.html">Home</a></li>
      <li><a class="active" href = "milestone4.html">4</a> </li>
    </ul>
  </nav>
  <div id="search-container">
    <input type="text" id="search-input" placeholder="Enter search terms">
    <button id="search-button">Search</button>
  </div>
  <div id="search-results"></div>

  
  <script id="book-template" type="text/template">
    {{#books}}
    <div class="book">
      <img src="{{thumbnail}}" alt="Book Cover">
      <h3>{{title}}</h3>
      <p>{{description}}</p>
    </div>
    {{/books}}
  </script>


<div id="search-results">
  <!-- The search results will be dynamically populated here -->
</div>

<div id="pagination">
  <!-- The pagination controls will be dynamically populated here -->
</div>
<!-- Add this code to the end of index.html, just before the closing </body> tag -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
  // Global variables to track the current search term and page
  var searchTerm = "";
  var currentPage = 1;
  var resultsPerPage = 10; // Change this value as per your preference
  
  // Function to perform a book search based on the user's input
  function searchBooks() {
    searchTerm = $("#search-input").val();
    currentPage = 1; // Reset to the first page when performing a new search
    getSearchResults();
  }
  
  // Function to fetch search results from the Google Books API
  function getSearchResults() {
    var startIndex = (currentPage - 1) * resultsPerPage;
    var url = "https://www.googleapis.com/books/v1/volumes?q=" + searchTerm + "&startIndex=" + startIndex + "&maxResults=" + resultsPerPage;
    
    // Make an AJAX request to fetch the search results
    $.ajax({
      url: url,
      dataType: "json",
      success: function(response) {
        displaySearchResults(response);
        renderPagination(response.totalItems);
      },
      error: function() {
        $("#search-results").html("An error occurred while fetching the search results.");
      }
    });
  }
  
  // Function to display the search results on the page
  function displaySearchResults(data) {
    var resultsContainer = $("#search-results");
    resultsContainer.empty();
    
    if (data.items && data.items.length > 0) {
      $.each(data.items, function(index, item) {
        var title = item.volumeInfo.title;
        var description = item.volumeInfo.description;
        var coverImage = item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.smallThumbnail : "";
        
        var resultItem = $("<div>").addClass("result-item");
        var titleElement = $("<h3>").text(title);
        var descriptionElement = $("<p>").text(description);
        var coverImageElement = $("<img>").attr("src", coverImage);
        
        resultItem.append(titleElement, coverImageElement, descriptionElement);
        resultsContainer.append(resultItem);
      });
    } else {
      resultsContainer.html("No results found.");
    }
  }
    });
  </script>
<div id="search-container">
  <input type="text" id="search-input" placeholder="Enter search terms">
  <button id="search-button">Search</button>
  <div id="view-toggle">
    <button id="grid-view-button" class="active">Grid View</button>
    <button id="list-view-button">List View</button>
  </div>
</div>
<div id="search-results" class="grid-view"></div>
    <script>
      // Event listeners for the view toggle buttons
document.getElementById('grid-view-button').addEventListener('click', function() {
  toggleView('grid-view');
});

document.getElementById('list-view-button').addEventListener('click', function() {
  toggleView('list-view');
});

// Function to toggle between grid and list view
function toggleView(view) {
  // Remove the 'active' class from all buttons
  var buttons = document.getElementById('view-toggle').getElementsByTagName('button');
  for (var i = 0; i < buttons.length; i++) {
    buttons[i].classList.remove('active');
  }

  // Add the 'active' class to the clicked button
  event.target.classList.add('active');

  // Toggle the view class on the search results container
  var searchResults = document.getElementById('search-results');
  searchResults.classList.remove('grid-view', 'list-view');
  searchResults.classList.add(view);
}

    </script>
</body>
</html>